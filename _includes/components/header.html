{% comment %}
  Header Component
  Main site navigation with logo, menu items, and language switcher
  Locale-aware: pulls navigation from _data/header-{locale}.yml
{% endcomment %}

{% assign current_locale = page.lang | default: site.default_lang | default: 'en' %}
{% assign header_key = 'header-' | append: current_locale %}
{% assign header = site.data[header_key] %}

<header class="site-header" role="banner">
  <nav class="site-nav container" aria-label="Main navigation">
    
    <!-- Logo / Site Title -->
    <div class="site-nav__brand">
      <a href="{{ '/' | relative_url }}" class="site-nav__logo" aria-label="Home">
        <span class="site-nav__logo-text">{{ site.title | default: 'Simon Salazar' }}</span>
      </a>
    </div>

    <!-- Mobile Menu Toggle -->
    <button 
      class="site-nav__toggle" 
      aria-label="Toggle navigation menu"
      aria-expanded="false"
      aria-controls="main-menu"
      type="button"
    >
      <span class="hamburger">
        <span class="hamburger__line"></span>
        <span class="hamburger__line"></span>
        <span class="hamburger__line"></span>
      </span>
    </button>

    <!-- Navigation Menu -->
    <div class="site-nav__menu" id="main-menu">
      
      {% if header.menu_items %}
      <ul class="nav-menu">
        {% for item in header.menu_items %}
          <li class="nav-menu__item">
            <a 
              href="{{ item.url | relative_url }}" 
              class="nav-menu__link {% if page.url == item.url %}nav-menu__link--active{% endif %}"
              {% if item.external %}
                target="_blank"
                rel="noopener noreferrer"
              {% endif %}
            >
              {{ item.label }}
            </a>
          </li>
        {% endfor %}
      </ul>
      {% else %}
        <!-- Fallback navigation if header data not available -->
        <ul class="nav-menu">
          <li class="nav-menu__item">
            <a href="{{ '/' | relative_url }}" class="nav-menu__link {% if page.url == '/' or page.url == '/index.html' %}nav-menu__link--active{% endif %}">
              {% if current_locale == 'es' %}Inicio{% else %}Home{% endif %}
            </a>
          </li>
          <li class="nav-menu__item">
            <a href="{{ '/' | append: current_locale | append: '/blog/' | relative_url }}" class="nav-menu__link {% if page.layout == 'blog-archive' %}nav-menu__link--active{% endif %}">
              {% if current_locale == 'es' %}Blog{% else %}Blog{% endif %}
            </a>
          </li>
        </ul>
      {% endif %}

      <!-- Language Switcher -->
      <div class="site-nav__lang">
        {% include components/language-switcher.html %}
      </div>

    </div>

  </nav>
</header>
